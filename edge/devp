FROM alpine:3.4

# 修改为国内镜像源
RUN echo "http://mirrors.aliyun.com/alpine/v3.4/main/" > /etc/apk/repositories
# RUN echo '@edge http://nl.alpinelinux.org/alpine/edge/main' >> /etc/apk/repositories
# RUN echo '@community http://nl.alpinelinux.org/alpine/edge/community' >> /etc/apk/repositories

RUN apk update && apk upgrade \
  && apk add cairo cairo-dev cairomm cairomm-dev \
  jpeg jpeg-dev libjpeg libjpeg-turbo libjpeg-turbo-dev \
  pango pango-dev pangomm pangomm-dev giflib giflib-dev libpng g++ \
  xproto renderproto kbproto xextproto freetype freetype-dev \
  git build-base nodejs-dev nodejs \
  && npm config set registry https://registry.npm.taobao.org --global \
  && npm install -g npm \
  && npm install -g node-gyp bower grunt-cli \
  && npm cache clear \
  && rm -rf /var/cache/apk/*
